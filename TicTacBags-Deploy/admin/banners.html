<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex, nofollow">
    <title>Banner Management - TicTacBags Admin</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="../css/style.css">
</head>
<body class="bg-light">
    <div class="container-fluid">
        <div class="row">
            <!-- Sidebar -->
            <div class="col-md-3 col-lg-2 px-0">
                <div class="admin-sidebar">
                    <!-- Admin Brand -->
                    <div class="text-center mb-4">
                        <h4 class="text-white fw-bold">
                            <i class="fas fa-shopping-bag me-2"></i>TicTacBags
                        </h4>
                        <p class="text-white-50 small mb-0">Admin Panel</p>
                    </div>

                    <!-- Admin User Info -->
                    <div class="text-center mb-4 pb-3 border-bottom border-secondary">
                        <div class="bg-white bg-opacity-10 rounded-circle d-inline-flex align-items-center justify-content-center mb-2" style="width: 50px; height: 50px;">
                            <i class="fas fa-user text-white"></i>
                        </div>
                        <h6 class="text-white mb-1">Administrator</h6>
                        <small class="text-white-50" id="loginTime"></small>
                    </div>

                    <!-- Navigation Menu -->
                    <ul class="admin-nav">
                        <li>
                            <a href="dashboard.html">
                                <i class="fas fa-tachometer-alt"></i>
                                Orders Management
                            </a>
                        </li>
                        <li>
                            <a href="products.html">
                                <i class="fas fa-box"></i>
                                Products Management
                            </a>
                        </li>
                        <li>
                            <a href="categories.html">
                                <i class="fas fa-list"></i>
                                Categories Management
                            </a>
                        </li>
                        <li>
                            <a href="brands.html">
                                <i class="fas fa-tags"></i>
                                Brands Management
                            </a>
                        </li>
                        <li>
                            <a href="banners.html" class="active">
                                <i class="fas fa-images"></i>
                                Banner Management
                            </a>
                        </li>
                        <li>
                            <a href="../index.html" target="_blank">
                                <i class="fas fa-external-link-alt"></i>
                                View Website
                            </a>
                        </li>
                        <li class="mt-4">
                            <a href="#" onclick="logout()" class="text-danger">
                                <i class="fas fa-sign-out-alt"></i>
                                Logout
                            </a>
                        </li>
                    </ul>
                </div>
            </div>

            <!-- Main Content -->
            <div class="col-md-9 col-lg-10">
                <div class="admin-content">
                    <!-- Header -->
                    <div class="d-flex justify-content-between align-items-center mb-4">
                        <div>
                            <h1 class="fw-bold text-dark">Banner Management</h1>
                            <p class="text-muted">Manage website slide banners and hero section images</p>
                        </div>
                        <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addBannerModal">
                            <i class="fas fa-plus me-2"></i>Add New Banner
                        </button>
                    </div>

                    <!-- Banner Guidelines -->
                    <div class="admin-card mb-4">
                        <h6 class="fw-bold mb-3">
                            <i class="fas fa-info-circle text-info me-2"></i>Banner Image Guidelines
                        </h6>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="bg-light p-3 rounded">
                                    <h6 class="text-primary">Hero Carousel Banners</h6>
                                    <ul class="small mb-0">
                                        <li><strong>Recommended Size:</strong> 1200 x 600 pixels</li>
                                        <li><strong>Aspect Ratio:</strong> 2:1 (landscape)</li>
                                        <li><strong>File Format:</strong> JPG, PNG, WebP</li>
                                        <li><strong>Max File Size:</strong> 2MB</li>
                                        <li><strong>Usage:</strong> Main homepage carousel</li>
                                    </ul>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="bg-light p-3 rounded">
                                    <h6 class="text-success">Promotional Banners</h6>
                                    <ul class="small mb-0">
                                        <li><strong>Recommended Size:</strong> 1200 x 300 pixels</li>
                                        <li><strong>Aspect Ratio:</strong> 4:1 (wide)</li>
                                        <li><strong>File Format:</strong> JPG, PNG, WebP</li>
                                        <li><strong>Max File Size:</strong> 1MB</li>
                                        <li><strong>Usage:</strong> Promotional sections</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Current Banners -->
                    <div class="admin-card">
                        <div class="d-flex justify-content-between align-items-center mb-3">
                            <h5 class="mb-0">Current Banners</h5>
                            <div class="btn-group btn-group-sm">
                                <button class="btn btn-outline-primary" onclick="refreshBanners()">
                                    <i class="fas fa-sync-alt me-1"></i>Refresh
                                </button>
                                <button class="btn btn-outline-success" onclick="previewWebsite()">
                                    <i class="fas fa-eye me-1"></i>Preview
                                </button>
                            </div>
                        </div>

                        <!-- Banners Grid -->
                        <div id="bannersContainer" class="row">
                            <!-- Banners will be loaded here -->
                        </div>

                        <!-- No Banners Message -->
                        <div id="noBannersMessage" class="text-center py-5 d-none">
                            <i class="fas fa-images text-muted mb-3" style="font-size: 3rem;"></i>
                            <h5 class="text-muted">No banners found</h5>
                            <p class="text-muted">Upload your first banner to get started.</p>
                            <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addBannerModal">
                                <i class="fas fa-plus me-2"></i>Add Banner
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Banner Modal -->
    <div class="modal fade" id="addBannerModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Add New Banner</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="addBannerForm">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="bannerTitle" class="form-label">Banner Title *</label>
                                    <input type="text" class="form-control" id="bannerTitle" name="title" required placeholder="Enter banner title">
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="bannerType" class="form-label">Banner Type *</label>
                                    <select class="form-select" id="bannerType" name="type" required onchange="updateImageSizeInfo()">
                                        <option value="">Select banner type</option>
                                        <option value="hero">Hero Carousel Banner</option>
                                        <option value="promotional">Promotional Banner</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label for="bannerDescription" class="form-label">Description</label>
                            <textarea class="form-control" id="bannerDescription" name="description" rows="3" placeholder="Brief description of the banner"></textarea>
                        </div>

                        <div class="mb-3">
                            <label for="bannerImage" class="form-label">Banner Image *</label>
                            <input type="file" class="form-control" id="bannerImage" name="image" accept="image/jpeg,image/jpg,image/png,image/webp" required>
                            <div class="form-text" id="imageSizeInfo">
                                Please select a banner type to see image size requirements.
                            </div>
                        </div>

                        <!-- Image Preview -->
                        <div id="imagePreview" class="mb-3 d-none">
                            <label class="form-label">Image Preview</label>
                            <div class="border rounded p-2">
                                <img id="previewImg" src="" alt="Preview" class="img-fluid" style="max-height: 200px;">
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="bannerLink" class="form-label">Link URL</label>
                                    <input type="url" class="form-control" id="bannerLink" name="link" placeholder="https://example.com">
                                    <div class="form-text">Optional: URL to redirect when banner is clicked</div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="bannerOrder" class="form-label">Display Order</label>
                                    <input type="number" class="form-control" id="bannerOrder" name="order" value="1" min="1">
                                    <div class="form-text">Lower numbers appear first</div>
                                </div>
                            </div>
                        </div>

                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="bannerActive" name="active" checked>
                            <label class="form-check-label" for="bannerActive">
                                Active (show on website)
                            </label>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="submit" form="addBannerForm" class="btn btn-primary">
                        <i class="fas fa-save me-2"></i>Save Banner
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit Banner Modal -->
    <div class="modal fade" id="editBannerModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Edit Banner</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="editBannerForm">
                        <input type="hidden" id="editBannerId" name="id">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="editBannerTitle" class="form-label">Banner Title *</label>
                                    <input type="text" class="form-control" id="editBannerTitle" name="title" required>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="editBannerType" class="form-label">Banner Type *</label>
                                    <select class="form-select" id="editBannerType" name="type" required>
                                        <option value="hero">Hero Carousel Banner</option>
                                        <option value="promotional">Promotional Banner</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label for="editBannerDescription" class="form-label">Description</label>
                            <textarea class="form-control" id="editBannerDescription" name="description" rows="3"></textarea>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Current Image</label>
                            <div class="border rounded p-2 mb-2">
                                <img id="editCurrentImg" src="" alt="Current Banner" class="img-fluid" style="max-height: 150px;">
                            </div>
                            <label for="editBannerImage" class="form-label">Replace Image (optional)</label>
                            <input type="file" class="form-control" id="editBannerImage" name="image" accept="image/jpeg,image/jpg,image/png,image/webp">
                        </div>

                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="editBannerLink" class="form-label">Link URL</label>
                                    <input type="url" class="form-control" id="editBannerLink" name="link">
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="editBannerOrder" class="form-label">Display Order</label>
                                    <input type="number" class="form-control" id="editBannerOrder" name="order" min="1">
                                </div>
                            </div>
                        </div>

                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="editBannerActive" name="active">
                            <label class="form-check-label" for="editBannerActive">
                                Active (show on website)
                            </label>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="submit" form="editBannerForm" class="btn btn-primary">
                        <i class="fas fa-save me-2"></i>Update Banner
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div class="modal fade" id="deleteBannerModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Delete Banner</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <p>Are you sure you want to delete this banner?</p>
                    <p class="text-muted">This action cannot be undone.</p>
                    <div class="border rounded p-2">
                        <img id="deletePreviewImg" src="" alt="Banner to delete" class="img-fluid" style="max-height: 100px;">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-danger" id="confirmDeleteBtn">
                        <i class="fas fa-trash me-2"></i>Delete Banner
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        let banners = [];
        let bannerToDelete = null;

        // Check admin authentication
        document.addEventListener('DOMContentLoaded', function() {
            checkAdminAuth();
            loadBanners();
            updateLoginTime();
            initializeFormHandlers();
        });

        function checkAdminAuth() {
            const loginData = localStorage.getItem('tictacbags_admin_login');
            if (!loginData) {
                window.location.href = 'index.html';
                return;
            }

            const data = JSON.parse(loginData);
            const now = new Date().getTime();
            const sessionDuration = data.rememberMe ? (24 * 60 * 60 * 1000) : (60 * 60 * 1000);
            
            if ((now - data.timestamp) > sessionDuration) {
                localStorage.removeItem('tictacbags_admin_login');
                window.location.href = 'index.html';
                return;
            }
        }

        function updateLoginTime() {
            const loginData = localStorage.getItem('tictacbags_admin_login');
            if (loginData) {
                const data = JSON.parse(loginData);
                const loginDate = new Date(data.timestamp);
                document.getElementById('loginTime').textContent = loginDate.toLocaleString();
            }
        }

        function logout() {
            if (confirm('Are you sure you want to logout?')) {
                localStorage.removeItem('tictacbags_admin_login');
                window.location.href = 'index.html';
            }
        }

        function loadBanners() {
            // Load banners from localStorage
            banners = JSON.parse(localStorage.getItem('tictacbags_banners')) || getDefaultBanners();
            displayBanners();
        }

        function getDefaultBanners() {
            return [
                {
                    id: 1,
                    title: "Premium Quality Bags",
                    description: "Discover our exclusive collection of stylish and durable bags for every occasion.",
                    type: "hero",
                    image: "https://via.placeholder.com/1200x600/007bff/ffffff?text=Premium+Quality+Bags",
                    link: "products.html",
                    order: 1,
                    active: true,
                    createdAt: new Date().toISOString()
                },
                {
                    id: 2,
                    title: "Travel in Style",
                    description: "Explore our travel bag collection designed for modern adventurers.",
                    type: "hero",
                    image: "https://via.placeholder.com/1200x600/28a745/ffffff?text=Travel+in+Style",
                    link: "products.html",
                    order: 2,
                    active: true,
                    createdAt: new Date().toISOString()
                },
                {
                    id: 3,
                    title: "Fashion Meets Function",
                    description: "Stylish handbags that complement your lifestyle and personality.",
                    type: "hero",
                    image: "https://via.placeholder.com/1200x600/ffc107/ffffff?text=Fashion+Meets+Function",
                    link: "products.html",
                    order: 3,
                    active: true,
                    createdAt: new Date().toISOString()
                }
            ];
        }

        function displayBanners() {
            const container = document.getElementById('bannersContainer');
            const noMessage = document.getElementById('noBannersMessage');

            if (banners.length === 0) {
                container.innerHTML = '';
                noMessage.classList.remove('d-none');
                return;
            }

            noMessage.classList.add('d-none');
            
            // Sort banners by order
            const sortedBanners = banners.sort((a, b) => a.order - b.order);
            
            container.innerHTML = '';

            sortedBanners.forEach(banner => {
                const bannerCard = createBannerCard(banner);
                container.appendChild(bannerCard);
            });
        }

        function createBannerCard(banner) {
            const col = document.createElement('div');
            col.className = 'col-lg-4 col-md-6 mb-4';
            
            const typeClass = banner.type === 'hero' ? 'primary' : 'success';
            const typeName = banner.type === 'hero' ? 'Hero Carousel' : 'Promotional';
            
            col.innerHTML = `
                <div class="card h-100">
                    <div class="position-relative">
                        <img src="${banner.image}" class="card-img-top" alt="${banner.title}" style="height: 200px; object-fit: cover;">
                        <div class="position-absolute top-0 start-0 p-2">
                            <span class="badge bg-${typeClass}">${typeName}</span>
                        </div>
                        <div class="position-absolute top-0 end-0 p-2">
                            <span class="badge ${banner.active ? 'bg-success' : 'bg-secondary'}">
                                ${banner.active ? 'Active' : 'Inactive'}
                            </span>
                        </div>
                    </div>
                    <div class="card-body d-flex flex-column">
                        <h6 class="card-title">${banner.title}</h6>
                        <p class="card-text text-muted small flex-grow-1">${banner.description || 'No description'}</p>
                        <div class="d-flex justify-content-between align-items-center mb-2">
                            <small class="text-muted">Order: ${banner.order}</small>
                            <small class="text-muted">${new Date(banner.createdAt).toLocaleDateString()}</small>
                        </div>
                        <div class="btn-group w-100">
                            <button class="btn btn-outline-primary btn-sm" onclick="editBanner(${banner.id})">
                                <i class="fas fa-edit"></i> Edit
                            </button>
                            <button class="btn btn-outline-danger btn-sm" onclick="deleteBanner(${banner.id})">
                                <i class="fas fa-trash"></i> Delete
                            </button>
                            <button class="btn btn-outline-info btn-sm" onclick="toggleBannerStatus(${banner.id})">
                                <i class="fas fa-${banner.active ? 'eye-slash' : 'eye'}"></i> ${banner.active ? 'Hide' : 'Show'}
                            </button>
                        </div>
                    </div>
                </div>
            `;
            
            return col;
        }

        function initializeFormHandlers() {
            // Add banner form
            document.getElementById('addBannerForm').addEventListener('submit', handleAddBanner);
            
            // Edit banner form
            document.getElementById('editBannerForm').addEventListener('submit', handleEditBanner);
            
            // Image preview for add form
            document.getElementById('bannerImage').addEventListener('change', function() {
                previewImage(this, 'previewImg', 'imagePreview');
            });
            
            // Delete confirmation
            document.getElementById('confirmDeleteBtn').addEventListener('click', confirmDelete);
        }

        function updateImageSizeInfo() {
            const bannerType = document.getElementById('bannerType').value;
            const infoElement = document.getElementById('imageSizeInfo');
            
            if (bannerType === 'hero') {
                infoElement.innerHTML = `
                    <strong>Hero Banner Requirements:</strong><br>
                    • Recommended size: 1200 x 600 pixels (2:1 ratio)<br>
                    • Max file size: 2MB<br>
                    • Formats: JPG, PNG, WebP
                `;
                infoElement.className = 'form-text text-primary';
            } else if (bannerType === 'promotional') {
                infoElement.innerHTML = `
                    <strong>Promotional Banner Requirements:</strong><br>
                    • Recommended size: 1200 x 300 pixels (4:1 ratio)<br>
                    • Max file size: 1MB<br>
                    • Formats: JPG, PNG, WebP
                `;
                infoElement.className = 'form-text text-success';
            } else {
                infoElement.textContent = 'Please select a banner type to see image size requirements.';
                infoElement.className = 'form-text';
            }
        }

        function previewImage(input, imgId, containerId) {
            if (input.files && input.files[0]) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    document.getElementById(imgId).src = e.target.result;
                    document.getElementById(containerId).classList.remove('d-none');
                };
                reader.readAsDataURL(input.files[0]);
            }
        }

        function handleAddBanner(e) {
            e.preventDefault();
            
            const formData = new FormData(e.target);
            const imageFile = formData.get('image');
            
            if (!imageFile || imageFile.size === 0) {
                showNotification('Please select an image file', 'error');
                return;
            }
            
            // Validate file size
            const maxSize = formData.get('type') === 'hero' ? 2 * 1024 * 1024 : 1024 * 1024; // 2MB for hero, 1MB for promotional
            if (imageFile.size > maxSize) {
                showNotification(`Image size is too large. Maximum size is ${maxSize / 1024 / 1024}MB`, 'error');
                return;
            }
            
            // Create new banner
            const reader = new FileReader();
            reader.onload = function(e) {
                const newBanner = {
                    id: Date.now(),
                    title: formData.get('title'),
                    description: formData.get('description') || '',
                    type: formData.get('type'),
                    image: e.target.result,
                    link: formData.get('link') || '',
                    order: parseInt(formData.get('order')) || 1,
                    active: formData.get('active') === 'on',
                    createdAt: new Date().toISOString()
                };
                
                banners.push(newBanner);
                localStorage.setItem('tictacbags_banners', JSON.stringify(banners));
                
                displayBanners();
                bootstrap.Modal.getInstance(document.getElementById('addBannerModal')).hide();
                e.target.reset();
                document.getElementById('imagePreview').classList.add('d-none');
                
                showNotification('Banner added successfully!', 'success');
            };
            reader.readAsDataURL(imageFile);
        }

        function editBanner(bannerId) {
            const banner = banners.find(b => b.id === bannerId);
            if (!banner) return;
            
            // Populate edit form
            document.getElementById('editBannerId').value = banner.id;
            document.getElementById('editBannerTitle').value = banner.title;
            document.getElementById('editBannerType').value = banner.type;
            document.getElementById('editBannerDescription').value = banner.description;
            document.getElementById('editCurrentImg').src = banner.image;
            document.getElementById('editBannerLink').value = banner.link;
            document.getElementById('editBannerOrder').value = banner.order;
            document.getElementById('editBannerActive').checked = banner.active;
            
            new bootstrap.Modal(document.getElementById('editBannerModal')).show();
        }

        function handleEditBanner(e) {
            e.preventDefault();
            
            const formData = new FormData(e.target);
            const bannerId = parseInt(formData.get('id'));
            const bannerIndex = banners.findIndex(b => b.id === bannerId);
            
            if (bannerIndex === -1) return;
            
            const imageFile = formData.get('image');
            
            if (imageFile && imageFile.size > 0) {
                // Validate file size if new image is provided
                const maxSize = formData.get('type') === 'hero' ? 2 * 1024 * 1024 : 1024 * 1024;
                if (imageFile.size > maxSize) {
                    showNotification(`Image size is too large. Maximum size is ${maxSize / 1024 / 1024}MB`, 'error');
                    return;
                }
                
                // Update with new image
                const reader = new FileReader();
                reader.onload = function(e) {
                    updateBannerData(bannerIndex, formData, e.target.result);
                };
                reader.readAsDataURL(imageFile);
            } else {
                // Update without changing image
                updateBannerData(bannerIndex, formData, banners[bannerIndex].image);
            }
        }

        function updateBannerData(bannerIndex, formData, imageData) {
            banners[bannerIndex] = {
                ...banners[bannerIndex],
                title: formData.get('title'),
                description: formData.get('description') || '',
                type: formData.get('type'),
                image: imageData,
                link: formData.get('link') || '',
                order: parseInt(formData.get('order')) || 1,
                active: formData.get('active') === 'on'
            };
            
            localStorage.setItem('tictacbags_banners', JSON.stringify(banners));
            displayBanners();
            bootstrap.Modal.getInstance(document.getElementById('editBannerModal')).hide();
            showNotification('Banner updated successfully!', 'success');
        }

        function deleteBanner(bannerId) {
            const banner = banners.find(b => b.id === bannerId);
            if (!banner) return;
            
            bannerToDelete = bannerId;
            document.getElementById('deletePreviewImg').src = banner.image;
            new bootstrap.Modal(document.getElementById('deleteBannerModal')).show();
        }

        function confirmDelete() {
            if (bannerToDelete) {
                banners = banners.filter(b => b.id !== bannerToDelete);
                localStorage.setItem('tictacbags_banners', JSON.stringify(banners));
                displayBanners();
                bootstrap.Modal.getInstance(document.getElementById('deleteBannerModal')).hide();
                showNotification('Banner deleted successfully!', 'success');
                bannerToDelete = null;
            }
        }

        function toggleBannerStatus(bannerId) {
            const bannerIndex = banners.findIndex(b => b.id === bannerId);
            if (bannerIndex !== -1) {
                banners[bannerIndex].active = !banners[bannerIndex].active;
                localStorage.setItem('tictacbags_banners', JSON.stringify(banners));
                displayBanners();
                const status = banners[bannerIndex].active ? 'activated' : 'deactivated';
                showNotification(`Banner ${status} successfully!`, 'info');
            }
        }

        function refreshBanners() {
            loadBanners();
            showNotification('Banners refreshed successfully!', 'info');
        }

        function previewWebsite() {
            window.open('../index.html', '_blank');
        }

        function showNotification(message, type = 'info') {
            const alertClass = type === 'error' ? 'danger' : type;
            const notification = document.createElement('div');
            notification.className = `alert alert-${alertClass} alert-dismissible fade show position-fixed`;
            notification.style.cssText = 'top: 20px; right: 20px; z-index: 9999; max-width: 350px;';
            notification.innerHTML = `
                ${message}
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.remove();
                }
            }, 5000);
        }

        // Initialize default banners if none exist
        if (!localStorage.getItem('tictacbags_banners')) {
            localStorage.setItem('tictacbags_banners', JSON.stringify(getDefaultBanners()));
        }
    </script>
</body>
</html>